{"version":3,"sources":["src/lib/helpers.js","src/lib/index.js","src/Hipsbar.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["ARROW_ICON","createOverlay","overlay","document","querySelector","contains","overlayNode","createElement","classList","add","body","appendChild","createChildNodes","listItem","children","innerHTML","childParentNode","forEach","child","i","childNode","childNodeLink","content","setAttribute","url","querySelectorAll","addEventListener","toggle","e","preventDefault","Hipsbar","options","activator","data","blur","position","width","dataURL","hipsbar","activatorNode","initHipsbar","list","listItemLink","fetch","then","res","json","initNodes","el","setTimeout","handleOverlay","addBlur","window","closeHipsbar","stopPropagation","remove","closeOverlay","isFullWidth","style","initData","initStyles","addOverlay","addActivatorListener","addCloseListener","initHooks","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","length","module"],"mappings":"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","file":"Hipsbar.8283f817.map","sourceRoot":"..","sourcesContent":["const ARROW_ICON = `<svg class=\"arrow\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"0 0 129 129\" enable-background=\"new 0 0 129 129\" width=\"512px\" height=\"512px\"><g><path d=\"m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z\" fill=\"#FFFFFF\"/></g></svg>`\n\nexport const createOverlay = () => {\n  let overlay = document.querySelector('.hipsbar--overlay')\n\n  if (!document.contains(overlay)) {\n    const overlayNode = document.createElement('div')\n    overlayNode.classList.add('hipsbar--overlay')\n  \n    document.body.appendChild(overlayNode)\n  }\n}\n\nexport const createChildNodes = (listItem, children) => {\n  listItem.classList.add('has--children')\n  listItem.innerHTML += ARROW_ICON\n\n  const childParentNode = document.createElement('ul')\n  childParentNode.classList.add('child--parent-item')\n\n  children.forEach((child, i) => {\n    const childNode = document.createElement('li')\n    const childNodeLink = document.createElement('a')\n\n    childNodeLink.innerHTML = child.content\n    childNodeLink.setAttribute('href', child.url)\n    \n    childNode.appendChild(childNodeLink)\n    childParentNode.appendChild(childNode)\n\n    if (child.children) {\n      createChildNodes(childNode, child.children)\n    }\n  })\n\n  listItem.querySelectorAll('a')[0]\n    .addEventListener('click', e => {\n      listItem.classList.toggle('is--active')\n      e.preventDefault()\n    })\n\n  listItem.appendChild(childParentNode)\n}\n","export * from './helpers'","import './scss/hipsbar.scss'\n\nimport {\n  createOverlay,\n  createChildNodes\n} from './lib'\n\nclass Hipsbar {\n  constructor(options) {\n    const {\n      activator,\n      data,\n      overlay,\n      blur,\n      position,\n      width,\n    } = options\n\n    this.activator = activator\n    this.data = data || []\n    this.dataURL = dataURL || []\n    this.overlay = overlay || false\n    this.blur = blur || false\n    this.position = position || 'left'\n    this.width = width || 360\n\n    this.hipsbar = null\n    this.activatorNode = document.querySelector(this.activator)\n\n    this.initHipsbar()\n  }\n\n  initNodes(data) {\n    const list = document.createElement('ul')\n\n    data.forEach(({ content, url, children }) => {\n      const listItem = document.createElement('li')\n      const listItemLink = document.createElement('a')\n\n      listItemLink.innerHTML = content\n      listItemLink.setAttribute('href', url)\n\n      listItem.appendChild(listItemLink)\n      list.appendChild(listItem)\n\n      if (children) {\n        createChildNodes(listItem, children)\n      }\n    })\n\n    this.hipsbar.setAttribute('data-hipsbar', this.activator)\n    this.hipsbar.appendChild(list)\n    document.body.appendChild(this.hipsbar)\n  }\n\n  get isFullWidth() {\n    return (\n      this.position == 'bottom' ||\n      this.position == 'top'\n    )\n  }\n\n  initData() {\n    if (this.dataURL) {\n      fetch(this.dataURL)\n        .then(res => res.json())\n        .then(data => {\n          this.initNodes(data)\n        })\n    } else {\n      this.initNodes(this.data)\n    }\n  }\n\n  addActivatorListener() {\n    const el = this.activatorNode\n    el.setAttribute('data-hipsbar-activator', this.activator)\n    el.addEventListener('click', e => {\n      this.hipsbar.classList.toggle('is--active')\n      setTimeout(() => {\n        this.handleOverlay()\n        this.addBlur()\n      }, 0)\n      e.preventDefault()\n    })\n  }\n\n  addCloseListener() {\n    window.addEventListener('click', e => {\n      this.closeHipsbar()\n    })\n    this.hipsbar.addEventListener('click', (e) => {\n      e.stopPropagation()\n    })\n    this.activatorNode.addEventListener('click', (e) => {\n      e.stopPropagation()\n    })\n  }\n\n  closeHipsbar() {\n    document.body.classList.remove('blurred--overlay')\n    this.hipsbar.classList.remove('is--active')\n    this.closeOverlay()\n  }\n\n  addOverlay() {\n    if (this.overlay) {\n      createOverlay()\n    }\n  }\n\n  closeOverlay() {\n    if (this.overlay) {\n      document.querySelector('.hipsbar--overlay').classList.remove('is--active')\n    }\n  }\n\n  addBlur() {\n    if (this.blur) {\n      document.body.classList.add('blurred--overlay')\n    }\n  }\n\n  handleOverlay() {\n    if (this.overlay) {\n      document.querySelector('.hipsbar--overlay').classList.add('is--active')\n    }\n  }\n\n  initStyles() {\n    if (!this.isFullWidth) {\n      this.hipsbar.style.width = `${this.width}px`\n    }\n  }\n\n  initHooks() {\n    this.initData()\n    this.initStyles()\n    this.addOverlay()\n    this.addActivatorListener()\n    this.addCloseListener()\n  }\n\n  initHipsbar() {\n    const hipsbar = document.createElement('div')\n    hipsbar.classList.add('hipsbar--wrapper', `is--${this.position}`)\n\n    this.hipsbar = hipsbar\n    this.initHooks()\n  }\n}\n\nwindow.Hipsbar = Hipsbar\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}